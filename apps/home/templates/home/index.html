{% extends "home/base.html" %}
{% load static %}

{% block title %}Inicio · Farmacia Salud y Ahorro{% endblock %}

{% block content %}
<!-- CARRUSEL (Hero) -->
<section id="hero" class="relative w-full overflow-hidden bg-green-700/5">
  <div id="slider" class="relative h-[52vh] md:h-[64vh]">
    <!-- Slides -->
    <div class="absolute inset-0 opacity-100 transition-opacity duration-700 ease-out" data-slide>
      <img src="{% static 'home/img/carusel 1.jpg' %}" class="w-full h-full object-cover" alt="Promoción 1"/>
      <div class="absolute inset-0 bg-gradient-to-r from-black/50 to-transparent"></div>
      <div class="absolute left-6 md:left-16 top-1/2 -translate-y-1/2 text-white max-w-xl">
        <h1 class="text-4xl md:text-6xl font-extrabold leading-tight">Bienvenidos<br><span class="text-emerald-300">Tu salud es prioridad</span></h1>
        <a href="#productos" class="btn btn-primary mt-5 inline-block">Comprar ahora</a>
      </div>
    </div>
    <div class="absolute inset-0 opacity-0 transition-opacity duration-700 ease-out" data-slide>
      <img src="{% static 'home/img/carusel 2.jpg' %}" class="w-full h-full object-cover" alt="Promoción 2"/>
      <div class="absolute inset-0 bg-gradient-to-r from-black/50 to-transparent"></div>
      <div class="absolute left-6 md:left-16 top-1/2 -translate-y-1/2 text-white max-w-xl">
        <h2 class="text-4xl md:text-6xl font-extrabold">Vive Bien<br><span class="text-emerald-300">Asesoría profesional</span></h2>
        <a href="#empresa" class="btn btn-primary mt-5 inline-block">Conócenos</a>
      </div>
    </div>
    <div class="absolute inset-0 opacity-0 transition-opacity duration-700 ease-out" data-slide>
      <img src="{% static 'home/img/carusel 3.jpg' %}" class="w-full h-full object-cover" alt="Promoción 3"/>
      <div class="absolute inset-0 bg-gradient-to-r from-black/50 to-transparent"></div>
      <div class="absolute left-6 md:left-16 top-1/2 -translate-y-1/2 text-white max-w-xl">
        <h2 class="text-4xl md:text-6xl font-extrabold">Ofertas<br><span class="text-emerald-300">Precios accesibles</span></h2>
        <a href="#productos" class="btn btn-primary mt-5 inline-block">Ver destacados</a>
      </div>
    </div>
  </div>
  <!-- Controles -->
  <button id="prev" class="absolute left-3 top-1/2 -translate-y-1/2 grid place-items-center w-10 h-10 rounded-full bg-white/80 hover:bg-white shadow"><span class="sr-only">Anterior</span>❮</button>
  <button id="next" class="absolute right-3 top-1/2 -translate-y-1/2 grid place-items-center w-10 h-10 rounded-full bg-white/80 hover:bg-white shadow"><span class="sr-only">Siguiente</span>❯</button>
  <!-- Indicadores -->
  <div id="dots" class="absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2"></div>
</section>

<!-- DEFINICIÓN / LO QUE OFRECEMOS -->
<section class="container mx-auto px-4 py-16" id="definicion">
  <div class="grid md:grid-cols-2 gap-10 items-center bg-white rounded-2xl shadow-lg p-8">
    <div>
      <h2 class="text-2xl md:text-3xl font-extrabold text-emerald-800 mb-4">¿Qué es Farmacia Salud y Ahorro?</h2>
      <p class="mb-8 text-slate-700 leading-relaxed text-lg">
        Somos una farmacia cercana que ofrece productos farmacéuticos y de cuidado personal con <span class="font-semibold">calidad</span>,
        <span class="font-semibold">buen precio</span> y <span class="font-semibold">asesoría profesional</span>.
      </p>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
        <div class="flex flex-col items-center bg-emerald-50 border border-emerald-200 rounded-xl shadow-soft p-6 transition hover:scale-105 hover:shadow-lg">
          <div class="badge mb-2 text-base px-4 py-1">Ofrecemos</div>
          <p class="text-slate-700 text-center text-[1rem] font-medium">Medicamentos, vitaminas, dermatología, pediatría.</p>
        </div>
        <div class="flex flex-col items-center bg-emerald-50 border border-emerald-200 rounded-xl shadow-soft p-6 transition hover:scale-105 hover:shadow-lg">
          <div class="badge mb-2 text-base px-4 py-1">Defendemos</div>
          <p class="text-slate-700 text-center text-[1rem] font-medium">Cercanía, rapidez y precios accesibles.</p>
        </div>
        <div class="flex flex-col items-center bg-emerald-50 border border-emerald-200 rounded-xl shadow-soft p-6 transition hover:scale-105 hover:shadow-lg">
          <div class="badge mb-2 text-base px-4 py-1">Servicios</div>
          <p class="text-slate-700 text-center text-[1rem] font-medium">Entrega a domicilio y atención personalizada.</p>
        </div>
      </div>
    </div>
    <img class="rounded-2xl shadow-soft w-full max-w-xs mx-auto md:max-w-md" alt="Farmacia"
         src="{% static 'home/img/farmacia.png' %}"/>
  </div>
</section>

<!-- PRODUCTOS POR CATEGORÍA -->
<section class="bg-emerald-50/50 border-y my-16 py-12 rounded-2xl shadow-lg" id="productos">
  <div class="container mx-auto px-4 py-12">
    <div class="flex flex-col md:flex-row items-center justify-between gap-4 mb-8">
      <h2 class="text-2xl md:text-3xl font-extrabold text-emerald-800">Productos</h2>
      <select id="filtro" class="h-11 px-4 rounded-xl border border-emerald-300 shadow bg-white w-full md:w-80">
        <option value="todos">Todas las categorías</option>
        <option value="marca">Medicamento de marca</option>
        <option value="generico">Medicamento genérico</option>
        <option value="topico">Producto tópico</option>
        <option value="inyectado">Producto inyectado</option>
      </select>
    </div>

    <div id="gridProductos" class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Medicamento de marca -->
      <div class="producto-card" data-cat="marca" data-nombre="Loratadina MK">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento de Marca</span>
          <img src="{% static 'home/img/loratadina.png' %}" alt="Loratadina" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Loratadina MK</h3>
          <span class="text-slate-700 text-sm mb-2">Q214.70</span>
        </div>
      </div>

      <div class="producto-card" data-cat="marca" data-nombre="Aligrip">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento de Marca</span>
          <img src="{% static 'home/img/Aligrip.png' %}" alt="Aligrip" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Aligrip</h3>
          <span class="text-slate-700 text-sm mb-2">Q46.45</span>
        </div>
      </div>

      <div class="producto-card" data-cat="marca" data-nombre="Ginna 0.02G">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento de Marca</span>
          <img src="{% static 'home/img/ginna.png' %}" alt="Ginna 0.02G" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Ginna 0.02G</h3>
          <span class="text-slate-700 text-sm mb-2">Q240.45</span>
        </div>
      </div>

      <div class="producto-card" data-cat="marca" data-nombre="Besic Derm 150mg">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento de Marca</span>
          <img src="{% static 'home/img/Besic Derm.png' %}" alt="Besic Derm" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Besic Derm 150mg</h3>
          <span class="text-slate-700 text-sm mb-2">Q102.91</span>
        </div>
      </div>

      <div class="producto-card" data-cat="marca" data-nombre="Colageina Advance">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento de Marca</span>
          <img src="{% static 'home/img/colageina.png' %}" alt="Colageina Advance" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Colageina Advance</h3>
          <span class="text-slate-700 text-sm mb-2">Q265.25</span>
        </div>
      </div>

      <!-- Medicamento genérico -->
      <div class="producto-card" data-cat="generico" data-nombre="Clotriplex 12.5G">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento Genérico</span>
          <img src="{% static 'home/img/clotriplex.png' %}" alt="Clotriplex" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Clotriplex 12.5G</h3>
          <span class="text-slate-700 text-sm mb-2">Q9.58</span>
        </div>
      </div>

      <div class="producto-card" data-cat="generico" data-nombre="Gencloben 30G">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento Genérico</span>
          <img src="{% static 'home/img/gencloben.png' %}" alt="Gencloben" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Gencloben 30G</h3>
          <span class="text-slate-700 text-sm mb-2">Q19.00</span>
        </div>
      </div>

      <div class="producto-card" data-cat="generico" data-nombre="Acetaminofén 500mg (unidad)">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento Genérico</span>
          <img src="{% static 'home/img/acetaminofen.png' %}" alt="Acetaminofén" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Acetaminofén 500mg (unidad)</h3>
          <span class="text-slate-700 text-sm mb-2">Q3.20</span>
        </div>
      </div>

      <div class="producto-card" data-cat="generico" data-nombre="Vitamina C 500mg">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento Genérico</span>
          <img src="{% static 'home/img/vitaminac.png' %}" alt="Vitamina C" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Vitamina C 500mg</h3>
          <span class="text-slate-700 text-sm mb-2">Q43.60</span>
        </div>
      </div>

      <div class="producto-card" data-cat="generico" data-nombre="Ibuprofeno 400mg (unidad)">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Medicamento Genérico</span>
          <img src="{% static 'home/img/ibuprofeno.png' %}" alt="Ibuprofeno" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Ibuprofeno 400mg (unidad)</h3>
          <span class="text-slate-700 text-sm mb-2">Q2.05</span>
        </div>
      </div>

      <!-- Producto tópico -->
      <div class="producto-card" data-cat="topico" data-nombre="Canesten Extra 15G">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Tópico</span>
          <img src="{% static 'home/img/canesten.png' %}" alt="Canesten Extra" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Canesten Extra 15G</h3>
          <span class="text-slate-700 text-sm mb-2">Q86.21</span>
        </div>
      </div>

      <div class="producto-card" data-cat="topico" data-nombre="Flamygel 30G">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Tópico</span>
          <img src="{% static 'home/img/flamygel.png' %}" alt="Flamygel" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Flamygel 30G</h3>
          <span class="text-slate-700 text-sm mb-2">Q54.11</span>
        </div>
      </div>

      <div class="producto-card" data-cat="topico" data-nombre="Clevium 30G">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Tópico</span>
          <img src="{% static 'home/img/Clevium.jpg' %}" alt="Clevium" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Clevium 30G</h3>
          <span class="text-slate-700 text-sm mb-2">Q78.75</span>
        </div>
      </div>

      <div class="producto-card" data-cat="topico" data-nombre="Gel Árnica y Manzanilla 120mg">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Tópico</span>
          <img src="{% static 'home/img/gelarnica.png' %}" alt="Gel Árnica" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Gel Árnica y Manzanilla 120mg</h3>
          <span class="text-slate-700 text-sm mb-2">Q18.95</span>
        </div>
      </div>

      <div class="producto-card" data-cat="topico" data-nombre="Diclofenaco Gel Tópico 20G">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Tópico</span>
          <img src="{% static 'home/img/diclofenaco.png' %}" alt="Diclofenaco Gel" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Diclofenaco Gel Tópico 20G</h3>
          <span class="text-slate-700 text-sm mb-2">Q11.05</span>
        </div>
      </div>

      <!-- Producto inyectado -->
      <div class="producto-card" data-cat="inyectado" data-nombre="Dexa Bioplexin 2ml">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Inyectado</span>
          <img src="{% static 'home/img/dexabioplexin.jpg' %}" alt="Dexa Bioplexin" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Dexa Bioplexin 2ml</h3>
          <span class="text-slate-700 text-sm mb-2">Q75.50</span>
        </div>
      </div>

      <div class="producto-card" data-cat="inyectado" data-nombre="Rofemed 1G">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Inyectado</span>
          <img src="{% static 'home/img/rofemed.jpg' %}" alt="Rofemed" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Rofemed 1G</h3>
          <span class="text-slate-700 text-sm mb-2">Q100.00</span>
        </div>
      </div>

      <div class="producto-card" data-cat="inyectado" data-nombre="Viro Grip Doble Terapia">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Inyectado</span>
          <img src="{% static 'home/img/virogrip.png' %}" alt="Viro Grip" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Viro Grip Doble Terapia</h3>
          <span class="text-slate-700 text-sm mb-2">Q22.05</span>
        </div>
      </div>

      <div class="producto-card" data-cat="inyectado" data-nombre="Axtar 0.5G">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Inyectado</span>
          <img src="{% static 'home/img/Axtar.jpg' %}" alt="Axtar" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Axtar 0.5G</h3>
          <span class="text-slate-700 text-sm mb-2">Q396.80</span>
        </div>
      </div>

      <div class="producto-card" data-cat="inyectado" data-nombre="Mesigyna Instayec 1 Ampolla">
        <div class="bg-white rounded-xl shadow-soft p-5 flex flex-col items-center">
          <span class="badge mb-2">Producto Inyectado</span>
          <img src="{% static 'home/img/mesigyna.jpg' %}" alt="Mesigyna" class="h-20 object-contain mb-2">
          <h3 class="font-bold text-emerald-700 text-center mb-1">Mesigyna Instayec 1 Ampolla</h3>
          <span class="text-slate-700 text-sm mb-2">Q144.5</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- JS: Carrusel y filtro -->
<script>
(function(){
  const slides = Array.from(document.querySelectorAll('[data-slide]'));
  const nextBtn = document.getElementById('next');
  const prevBtn = document.getElementById('prev');
  const dotsWrap = document.getElementById('dots');
  if (slides.length && nextBtn && prevBtn && dotsWrap){
    let idx=0, timer=null;
    slides.forEach((_,i)=>{
      const b=document.createElement('button');
      b.className='w-2.5 h-2.5 rounded-full bg-white/60 hover:bg-white transition';
      b.addEventListener('click',()=>go(i,true));
      dotsWrap.appendChild(b);
    });
    function paint(){
      slides.forEach((s,i)=>{s.style.opacity=i===idx?1:0});
      Array.from(dotsWrap.children).forEach((d,i)=>{d.style.background=i===idx?'#10B981':'rgba(255,255,255,.6)'});
    }
    function go(n,manual=false){
      idx=(n+slides.length)%slides.length; paint();
      if(manual){ restart(); }
    }
    function step(){ go(idx+1); }
    function restart(){ clearInterval(timer); timer=setInterval(step,5000); }
    nextBtn.addEventListener('click',()=>go(idx+1,true));
    prevBtn.addEventListener('click',()=>go(idx-1,true));
    restart(); paint();
  }

  // Filtro por texto + categoría (IDs alineados)
  const grid=document.getElementById('gridProductos');
  const filtro=document.getElementById('filtro');
  const buscador=document.getElementById('buscador'); // si existe
  let cards = grid ? Array.from(grid.children) : [];
  function filtra(){
    if(!grid) return;
    const term=(buscador?.value||'').toLowerCase().trim();
    const cat=filtro?.value||'todos';
    cards.forEach(c=>{
      const n=(c.dataset.nombre||'').toLowerCase();
      const okText=!term||n.includes(term);
      const okCat=cat==='todos'||c.dataset.cat===cat;
      c.style.display= okText && okCat ? '' : 'none';
    });
  }
  filtro?.addEventListener('change',filtra);
  buscador?.addEventListener('input',filtra);
})();
</script>
{% endblock %}
