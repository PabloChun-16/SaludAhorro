{% extends "dashboard/base.html" %}
{% load static %}

{% block title %}Dashboard · SAIF{% endblock %}

{% block content %}
<section class="p-6 md:p-8">

  <!-- Encabezado -->
  <div class="mb-8 flex items-start justify-between gap-4">
    <div>
      <div class="text-sm text-slate-500">
        Hola, {% firstof request.user.first_name request.user.get_full_name request.user.get_username request.user %}
      </div>

      <h1 class="cheto-title text-4xl md:text-5xl">Panel De Control</h1>

      <div class="mt-3 flex flex-wrap items-center gap-2 text-sm">
        <span class="inline-flex items-center gap-1 rounded-full border border-emerald-200 bg-emerald-50 px-2.5 py-1 text-emerald-700">
          <i class="bi bi-lightning-charge"></i> Activo
        </span>
        <span class="inline-flex items-center gap-1 rounded-lg border border-slate-200 bg-white px-2.5 py-1 text-slate-700">
          <i class="bi bi-clock"></i>
          <span id="dash-clock"></span>
        </span>
        <span id="dash-tip" class="hidden sm:inline text-slate-500"></span>
      </div>
    </div>
  </div>

  <!-- Tarjetas -->
  <div class="grid gap-8 md:grid-cols-3">
    <!-- Inventario -->
    <a href="/inventario/" class="group border rounded-xl p-8 text-center hover:shadow-lg transition bg-white">
      <i class="bi bi-clipboard2 text-7xl text-slate-800 group-hover:text-emerald-700 transition"></i>
      <div class="mt-4 font-semibold text-slate-800">Gestión de Inventario</div>
      <div class="mt-2 text-slate-600">Productos, stock y lotes.</div>
    </a>

    <!-- Recepción y Almacenamiento -->
    <a href="/recepcion_almacenamiento/" class="group border rounded-xl p-8 text-center hover:shadow-lg transition bg-white">
      <i class="bi bi-box-seam text-7xl text-slate-800 group-hover:text-emerald-700 transition"></i>
      <div class="mt-4 font-semibold text-slate-800">Recepción y Almacenamiento</div>
      <div class="mt-2 text-slate-600">Registro y control de recepciones.</div>
    </a>

    <!-- Salidas y Devoluciones -->
    <a href="/salidas_devoluciones/" class="group border rounded-xl p-8 text-center hover:shadow-lg transition bg-white">
      <i class="bi bi-box-arrow-right text-7xl text-slate-800 group-hover:text-emerald-700 transition"></i>
      <div class="mt-4 font-semibold text-slate-800">Salidas y Devoluciones</div>
      <div class="mt-2 text-slate-600">Ventas y devoluciones al inventario.</div>
    </a>

    <!-- Alertas y Vencimientos -->
    <a href="/alertas_vencimientos/" class="group border rounded-xl p-8 text-center hover:shadow-lg transition bg-white">
      <i class="bi bi-exclamation-triangle text-7xl text-slate-800 group-hover:text-emerald-700 transition"></i>
      <div class="mt-4 font-semibold text-slate-800">Alertas y Vencimientos</div>
      <div class="mt-2 text-slate-600">Notificaciones por stock crítico y fechas.</div>
    </a>

    <!-- Solicitudes a Bodega Central -->
    <a href="/solicitudes_bodega_central/" class="group border rounded-xl p-8 text-center hover:shadow-lg transition bg-white">
      <i class="bi bi-inboxes text-7xl text-slate-800 group-hover:text-emerald-700 transition"></i>
      <div class="mt-4 font-semibold text-slate-800">Solicitudes a Bodega Central</div>
      <div class="mt-2 text-slate-600">Crear y revisar solicitudes.</div>
    </a>

    <!-- Conteo Físico y Ajuste -->
    <a href="/ajustes_inventario/" class="group border rounded-xl p-8 text-center hover:shadow-lg transition bg-white">
      <i class="bi bi-sliders2-vertical text-7xl text-slate-800 group-hover:text-emerald-700 transition"></i>
      <div class="mt-4 font-semibold text-slate-800">Conteo Físico y Ajuste</div>
      <div class="mt-2 text-slate-600">Conteos cíclicos y ajustes de stock.</div>
    </a>

    <!-- Gestión de Recetas -->
    <a href="/recetas/" class="group border rounded-xl p-8 text-center hover:shadow-lg transition bg-white">
      <i class="bi bi-bookmark text-7xl text-slate-800 group-hover:text-emerald-700 transition"></i>
      <div class="mt-4 font-semibold text-slate-800">Gestión de Recetas</div>
      <div class="mt-2 text-slate-600">Registro, envíos y listados.</div>
    </a>

    <!-- Mantenimiento -->
    <a href="/mantenimiento/" class="group border rounded-xl p-8 text-center hover:shadow-lg transition bg-white">
      <i class="bi bi-gear-wide-connected text-7xl text-slate-800 group-hover:text-emerald-700 transition"></i>
      <div class="mt-4 font-semibold text-slate-800">Mantenimiento</div>
      <div class="mt-2 text-slate-600">Catálogos maestros y usuarios.</div>
    </a>
  </div>

  <!-- JS: reloj y tips -->
  <script>
    (function () {
      // Reloj
      const clockEl = document.getElementById('dash-clock');
      function tick(){
        const d = new Date();
        try {
          clockEl.textContent = d.toLocaleString('es-GT', { hour: '2-digit', minute: '2-digit' });
        } catch (e) {
          clockEl.textContent = d.toLocaleTimeString().slice(0,5);
        }
      }
      tick(); setInterval(tick, 1000);

      // Tips rotativos
      const tips = [
        "Tip: Revisa Alertas y Vencimientos cada mañana.",
        "Tip: Solicitudes a Bodega Central agiliza el surtido.",
        "Tip: En Conteo Físico y Ajuste mantén el kardex al día."
      ];
      const tipEl = document.getElementById('dash-tip');
      if (tipEl){
        let i = 0;
        tipEl.textContent = tips[i];
        setInterval(() => {
          i = (i + 1) % tips.length;
          tipEl.textContent = tips[i];
        }, 5000);
      }
    })();
  </script>

</section>
{% endblock %}

