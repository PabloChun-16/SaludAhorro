<!-- templates/recetas/partials/envio_cambiar_estado_modal.html -->
<div class="modal-header">
  <div class="saif-modal-title">
    <span class="saif-modal-icon"><i class="bi bi-arrow-repeat"></i></span>
    <span>Cambiar estado del env&iacute;o</span>
  </div>
  <span class="saif-badge">SAIF</span>
  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
</div>

<form id="formCambiarEstadoEnvio" method="post" action="{% url 'recetas:envio_cambiar_estado' envio.id %}">
  {% csrf_token %}
  <div class="modal-body saif-modal-body">
    <div class="saif-field">
      <label class="saif-label">Reporte</label>
      <div class="saif-input-readonly">
        <i class="bi bi-clipboard-check"></i>
        <span>{{ envio.nombre_reporte }}</span>
      </div>
    </div>

    <div class="saif-field">
      <label class="saif-label">Estado actual</label>
      <div class="saif-input-readonly">
        <i class="bi bi-flag"></i>
        <span>{{ envio.id_estado_envio.nombre_estado|default:"-" }}</span>
      </div>
    </div>

    <div class="saif-field">
      <label class="saif-label">Nuevo estado</label>
      <div class="saif-select-wrap">
        <span class="saif-select-icon"><i class="bi bi-arrows-expand"></i></span>
        <select class="form-select saif-select" name="estado_id" required>
          {% for e in estados %}
            <option value="{{ e.id }}"
              {% if envio.id_estado_envio_id == e.id %}selected{% endif %}>
              {{ e.nombre_estado }}
            </option>
          {% endfor %}
        </select>
      </div>
      <div class="saif-hint">
        <i class="bi bi-info-circle"></i>
        <span>Valores recomendados: Enviado (por defecto), Cancelado, Recibido.</span>
      </div>
    </div>
  </div>

  <div class="modal-footer saif-footer">
    <button type="button" class="btn saif-btn-light" data-bs-dismiss="modal">
      <i class="bi bi-x-lg"></i> Cancelar
    </button>
    <button type="submit" class="btn saif-btn-success">
      <i class="bi bi-check2-circle"></i> Guardar
    </button>
  </div>
</form>
